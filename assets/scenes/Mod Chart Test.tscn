[gd_scene load_steps=40 format=2]

[ext_resource path="res://assets/scenes/notes/Note Track.tscn" type="PackedScene" id=1]
[ext_resource path="res://assets/characters/boyfriend/Boyfriend.tscn" type="PackedScene" id=2]
[ext_resource path="res://assets/scenes/Mod Chart Test.gd" type="Script" id=3]
[ext_resource path="res://assets/scenes/Editor Song Track.gd" type="Script" id=4]
[ext_resource path="res://assets/scripts/modchart test/Note Track thingy thing.gd" type="Script" id=5]
[ext_resource path="res://assets/sounds/test/simple test song ig lol instrume3ntals 2.wav" type="AudioStream" id=6]
[ext_resource path="res://assets/sounds/test/simple test song ig lol bf vocals 2.wav" type="AudioStream" id=7]
[ext_resource path="res://assets/scripts/modchart test/Timer.gd" type="Script" id=8]
[ext_resource path="res://assets/images/debug_texture.png" type="Texture" id=9]
[ext_resource path="res://assets/scripts/modchart test/Viewport 2.gd" type="Script" id=10]
[ext_resource path="res://assets/weeks/tutorial/assets/images/stagefront.png" type="Texture" id=11]
[ext_resource path="res://assets/weeks/tutorial/assets/images/stageback.png" type="Texture" id=12]
[ext_resource path="res://assets/weeks/tutorial/assets/images/stagecurtains.png" type="Texture" id=13]
[ext_resource path="res://assets/scripts/modchart test/stage scene.gd" type="Script" id=14]
[ext_resource path="res://assets/scripts/modchart test/screen mesh.gd" type="Script" id=15]

[sub_resource type="Animation" id=1]
resource_name = "MOOOOVE OVER"
tracks/0/type = "bezier"
tracks/0/path = NodePath("Note Track:position:x")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"points": PoolRealArray( 0, -0.25, 0, 0.816388, -1.75327, 724.64, -0.622129, -4.02435, 0.25, 0 ),
"times": PoolRealArray( 0, 1 )
}
tracks/1/type = "bezier"
tracks/1/path = NodePath("Note Track:position:y")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"points": PoolRealArray( 0, -0.25, 0, 0.25, 0, 0, -0.25, 0, 0.25, 0 ),
"times": PoolRealArray( 0, 1 )
}
tracks/2/type = "bezier"
tracks/2/path = NodePath("2nd note track boi:modulate:r")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"points": PoolRealArray( 1, -0.25, 0, 0.25, 0, 1, -0.25, 0, 0.25, 0 ),
"times": PoolRealArray( 0, 1 )
}
tracks/3/type = "bezier"
tracks/3/path = NodePath("2nd note track boi:modulate:g")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/keys = {
"points": PoolRealArray( 1, -0.25, 0, 0.25, 0, 1, -0.25, 0, 0.25, 0 ),
"times": PoolRealArray( 0, 1 )
}
tracks/4/type = "bezier"
tracks/4/path = NodePath("2nd note track boi:modulate:b")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/keys = {
"points": PoolRealArray( 1, -0.25, 0, 0.25, 0, 1, -0.25, 0, 0.25, 0 ),
"times": PoolRealArray( 0, 1 )
}
tracks/5/type = "bezier"
tracks/5/path = NodePath("2nd note track boi:modulate:a")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/keys = {
"points": PoolRealArray( 0, -0.25, 0, 0.25, 0, 1, -0.25, 0, 0.25, 0 ),
"times": PoolRealArray( 0, 1 )
}

[sub_resource type="Animation" id=23]
resource_name = "NOTE TRACK ROTA TE"
length = 3.0
loop = true
tracks/0/type = "bezier"
tracks/0/path = NodePath("Note Track:rotation_degrees")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"points": PoolRealArray( -30, -0.25, 0, 0.25, 0, 30, -0.25, 0, 0.25, 0, -30, -0.25, 0, 0.25, 0 ),
"times": PoolRealArray( 0, 1.5, 3 )
}
tracks/1/type = "bezier"
tracks/1/path = NodePath("2nd note track boi:rotation_degrees")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"points": PoolRealArray( 15, -0.25, 0, 0.25, 0, -20, -0.25, 0, 0.25, 0, 15, -0.25, 0, 0.25, 0 ),
"times": PoolRealArray( 0, 1.5, 3 )
}

[sub_resource type="Animation" id=24]
resource_name = "SWING IN"
tracks/0/type = "bezier"
tracks/0/path = NodePath("Note Track:rotation_degrees")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"points": PoolRealArray( 0, -0.25, 0, 0.25, 0, -30, -0.25, 0, 0.25, 0 ),
"times": PoolRealArray( 0, 1 )
}
tracks/1/type = "bezier"
tracks/1/path = NodePath("2nd note track boi:rotation_degrees")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"points": PoolRealArray( 0, -0.25, 0, 0.25, 0, 15, -0.25, 0, 0.25, 0 ),
"times": PoolRealArray( 0, 1 )
}

[sub_resource type="VisualShaderNodeSwitch" id=19]

[sub_resource type="VisualShaderNodeBooleanUniform" id=20]
uniform_name = "switchaaa"

[sub_resource type="VisualShaderNodeTextureUniform" id=2]
uniform_name = "screen_1"

[sub_resource type="VisualShaderNodeInput" id=7]
input_name = "uv"

[sub_resource type="VisualShaderNodeInput" id=8]
input_name = "time"

[sub_resource type="VisualShaderNodeVectorOp" id=9]

[sub_resource type="VisualShaderNodeVectorOp" id=10]
default_input_values = [ 0, Vector3( 0, 0, 0 ), 1, Vector3( 1, 1, 1 ) ]
operator = 4

[sub_resource type="VisualShaderNodeScalarFunc" id=11]
function = 0

[sub_resource type="VisualShaderNodeScalarOp" id=12]
default_input_values = [ 0, 0.0, 1, 0.2 ]
operator = 2

[sub_resource type="VisualShaderNodeTextureUniform" id=21]
uniform_name = "screen_2"

[sub_resource type="VisualShader" id=3]
resource_local_to_scene = true
code = "shader_type canvas_item;
uniform bool switchaaa;
uniform sampler2D screen_2;
uniform sampler2D screen_1;



void vertex() {
// Output:0

}

void fragment() {
// BooleanUniform:11
	bool n_out11p0 = switchaaa;

// TextureUniform:9
	vec3 n_out9p0;
	float n_out9p1;
	{
		vec4 n_tex_read = texture(screen_2, UV.xy);
		n_out9p0 = n_tex_read.rgb;
		n_out9p1 = n_tex_read.a;
	}

// Input:3
	vec3 n_out3p0 = vec3(UV, 0.0);

// VectorOp:5
	vec3 n_in5p0 = vec3(0.00000, 0.00000, 0.00000);
	vec3 n_out5p0 = n_in5p0 + n_out3p0;

// VectorOp:6
	vec3 n_in6p1 = vec3(1.00000, 1.00000, 1.00000);
	vec3 n_out6p0 = mod(n_out5p0, n_in6p1);

// TextureUniform:2
	vec3 n_out2p0;
	float n_out2p1;
	{
		vec4 n_tex_read = texture(screen_1, n_out6p0.xy);
		n_out2p0 = n_tex_read.rgb;
		n_out2p1 = n_tex_read.a;
	}

// VectorSwitch:10
	vec3 n_out10p0;
	if(n_out11p0)
	{
		n_out10p0 = n_out9p0;
	}
	else
	{
		n_out10p0 = n_out2p0;
	}

// Output:0
	COLOR.rgb = n_out10p0;

}

void light() {
// Output:0

}
"
graph_offset = Vector2( -242.497, 0 )
mode = 1
flags/light_only = false
nodes/fragment/0/position = Vector2( 600, 160 )
nodes/fragment/2/node = SubResource( 2 )
nodes/fragment/2/position = Vector2( 120, 120 )
nodes/fragment/3/node = SubResource( 7 )
nodes/fragment/3/position = Vector2( -380, 240 )
nodes/fragment/4/node = SubResource( 8 )
nodes/fragment/4/position = Vector2( -620, 120 )
nodes/fragment/5/node = SubResource( 9 )
nodes/fragment/5/position = Vector2( -100, 120 )
nodes/fragment/6/node = SubResource( 10 )
nodes/fragment/6/position = Vector2( 60, 20 )
nodes/fragment/7/node = SubResource( 11 )
nodes/fragment/7/position = Vector2( -440, 100 )
nodes/fragment/8/node = SubResource( 12 )
nodes/fragment/8/position = Vector2( -300, 100 )
nodes/fragment/9/node = SubResource( 21 )
nodes/fragment/9/position = Vector2( 120, 300 )
nodes/fragment/10/node = SubResource( 19 )
nodes/fragment/10/position = Vector2( 400, 60 )
nodes/fragment/11/node = SubResource( 20 )
nodes/fragment/11/position = Vector2( 180, 40 )
nodes/fragment/connections = PoolIntArray( 3, 0, 5, 1, 5, 0, 6, 0, 6, 0, 2, 0, 4, 0, 7, 0, 7, 0, 8, 0, 9, 0, 10, 1, 2, 0, 10, 2, 10, 0, 0, 0, 11, 0, 10, 0 )

[sub_resource type="ViewportTexture" id=4]
viewport_path = NodePath("Viewport 1")

[sub_resource type="ViewportTexture" id=22]
viewport_path = NodePath("Viewport 2")

[sub_resource type="ShaderMaterial" id=5]
resource_local_to_scene = true
shader = SubResource( 3 )
shader_param/switchaaa = null
shader_param/screen_2 = SubResource( 22 )
shader_param/screen_1 = SubResource( 4 )

[sub_resource type="QuadMesh" id=6]
size = Vector2( 1920, 1080 )

[sub_resource type="VisualShaderNodeTextureUniform" id=13]
uniform_name = "viewbox_lol"

[sub_resource type="VisualShader" id=14]
code = "shader_type canvas_item;
uniform sampler2D viewbox_lol;



void vertex() {
// Output:0

}

void fragment() {
// TextureUniform:2
	vec3 n_out2p0;
	float n_out2p1;
	{
		vec4 n_tex_read = texture(viewbox_lol, UV.xy);
		n_out2p0 = n_tex_read.rgb;
		n_out2p1 = n_tex_read.a;
	}

// Output:0
	COLOR.rgb = n_out2p0;

}

void light() {
// Output:0

}
"
graph_offset = Vector2( -578.572, 0 )
mode = 1
flags/light_only = false
nodes/fragment/2/node = SubResource( 13 )
nodes/fragment/2/position = Vector2( -20, 140 )
nodes/fragment/connections = PoolIntArray( 2, 0, 0, 0 )

[sub_resource type="ViewportTexture" id=15]
viewport_path = NodePath("Viewport 1")

[sub_resource type="ShaderMaterial" id=16]
resource_local_to_scene = true
shader = SubResource( 14 )
shader_param/viewbox_lol = SubResource( 15 )

[sub_resource type="QuadMesh" id=17]
size = Vector2( 1920, 1080 )

[sub_resource type="Animation" id=18]
resource_name = "transition in bois"
tracks/0/type = "bezier"
tracks/0/path = NodePath("MeshInstance2D/Camera2D:position:x")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"points": PoolRealArray( 0, -0.25, 0, 0.25, 0, -168.547, -0.25, 0, 0.25, 0 ),
"times": PoolRealArray( 0, 1 )
}
tracks/1/type = "bezier"
tracks/1/path = NodePath("MeshInstance2D/Camera2D:position:y")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"points": PoolRealArray( 0, -0.25, 0, 0.25, 0, 723.258, -0.25, 0, 0.25, 0 ),
"times": PoolRealArray( 0, 1 )
}
tracks/2/type = "bezier"
tracks/2/path = NodePath("MeshInstance2D/Camera2D:zoom:x")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"points": PoolRealArray( 0.235, -0.25, 0, 0.25, 0, 1, -0.25, 0, 0.25, 0 ),
"times": PoolRealArray( 0, 1 )
}
tracks/3/type = "bezier"
tracks/3/path = NodePath("MeshInstance2D/Camera2D:zoom:y")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/keys = {
"points": PoolRealArray( 0.235, -0.25, 0, 0.25, 0, 1, -0.25, 0, 0.25, 0 ),
"times": PoolRealArray( 0, 1 )
}
tracks/4/type = "bezier"
tracks/4/path = NodePath("MeshInstance2D/Camera2D:rotation_degrees")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/keys = {
"points": PoolRealArray( 0, -0.25, 0, 0.25, 0, 24.8985, -0.25, 0, 0.25, 0 ),
"times": PoolRealArray( 0, 1 )
}

[node name="Mod Chart Test" type="Node2D" groups=[
"Player Input Recievers",
]]
script = ExtResource( 3 )
instrumentals = NodePath("Instrumentals")

[node name="Viewport 1" type="Viewport" parent="."]
size = Vector2( 1920, 1080 )
own_world = true
usage = 0
render_target_update_mode = 3

[node name="Camera2D" type="Camera2D" parent="Viewport 1"]
visible = false

[node name="debug_texture" type="Sprite" parent="Viewport 1"]
visible = false
position = Vector2( -81.1001, 110.735 )
scale = Vector2( 100, 100 )
texture = ExtResource( 9 )

[node name="Camera2D2" type="Camera2D" parent="Viewport 1"]
position = Vector2( 0, -195.291 )
current = true

[node name="Boyfriend" parent="Viewport 1" instance=ExtResource( 2 )]
position = Vector2( 372.169, 49.8198 )

[node name="Timer" type="Timer" parent="Viewport 1" groups=[
"Start Timers",
]]
wait_time = 2.0
one_shot = true
script = ExtResource( 8 )

[node name="Note Track thingy thing" type="Node2D" parent="Viewport 1" groups=[
"Song Event Recievers",
]]
position = Vector2( -561.718, -588.627 )
script = ExtResource( 5 )

[node name="Note Track" parent="Viewport 1/Note Track thingy thing" groups=[
"Note Tracks",
] instance=ExtResource( 1 )]
position = Vector2( 0.0118087, 0 )
chart_file = "res://test thingy chart yay lol2.json"
chart_format = 1
player_track = true
scroll_speed = 2.525

[node name="Note Track Anim" type="AnimationPlayer" parent="Viewport 1/Note Track thingy thing"]
"anims/MOOOOVE OVER" = SubResource( 1 )
"anims/NOTE TRACK ROTA TE" = SubResource( 23 )
"anims/SWING IN" = SubResource( 24 )

[node name="2nd note track boi" type="Node2D" parent="Viewport 1/Note Track thingy thing"]
modulate = Color( 1, 1, 1, 0.000450109 )

[node name="note dupe timer" type="Timer" parent="Viewport 1" groups=[
"Start Timers",
]]
wait_time = 4.0
one_shot = true

[node name="note rota te timer" type="Timer" parent="Viewport 1" groups=[
"Start Timers",
]]
wait_time = 7.0
one_shot = true

[node name="screen mesh" type="MeshInstance2D" parent="." groups=[
"Song Event Recievers",
]]
material = SubResource( 5 )
mesh = SubResource( 6 )
script = ExtResource( 15 )

[node name="Viewport 2" type="Viewport" parent="." groups=[
"Song Event Recievers",
]]
size = Vector2( 1920, 1080 )
render_target_update_mode = 0
script = ExtResource( 10 )

[node name="stage scene" type="Node2D" parent="Viewport 2" groups=[
"Note Track Recievers",
"Song Event Recievers",
]]
script = ExtResource( 14 )

[node name="stageback" type="Sprite" parent="Viewport 2/stage scene"]
position = Vector2( -8.63953, -94.9584 )
texture = ExtResource( 12 )

[node name="stagefront" type="Sprite" parent="Viewport 2/stage scene"]
position = Vector2( 46.3196, 193.209 )
texture = ExtResource( 11 )

[node name="Boyfriend" parent="Viewport 2/stage scene" instance=ExtResource( 2 )]
position = Vector2( 372.169, 49.8198 )

[node name="stagecurtains" type="Sprite" parent="Viewport 2/stage scene"]
position = Vector2( 56.4143, -100.615 )
texture = ExtResource( 13 )

[node name="MeshInstance2D" type="MeshInstance2D" parent="Viewport 2/stage scene"]
material = SubResource( 16 )
position = Vector2( -36.009, -350.95 )
rotation = -0.434347
scale = Vector2( 0.235277, 0.235277 )
mesh = SubResource( 17 )

[node name="Camera2D" type="Camera2D" parent="Viewport 2/stage scene/MeshInstance2D"]
position = Vector2( -168.547, 723.258 )
rotation = 0.434561
scale = Vector2( 5.8458, 5.8458 )
rotating = true
current = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="Viewport 2/stage scene"]
playback_speed = 3.0
"anims/transition in bois" = SubResource( 18 )

[node name="track" type="Node2D" parent="Viewport 2/stage scene"]
position = Vector2( -601.372, -554.411 )

[node name="Note Track" parent="Viewport 2/stage scene/track" instance=ExtResource( 1 )]
visible = false

[node name="Instrumentals" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 6 )
script = ExtResource( 4 )
offset_ms = -15.5

[node name="Player Vocals" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 7 )

[node name="Camera2D3" type="Camera2D" parent="."]
current = true

[node name="neeeto timer" type="Timer" parent="." groups=[
"Start Timers",
]]
wait_time = 13.0
one_shot = true

[connection signal="timeout" from="Viewport 1/Timer" to="Viewport 1/Timer" method="_on_Timer_timeout"]
[connection signal="timeout" from="Viewport 1/Timer" to="." method="_on_Timer_timeout"]
[connection signal="animation_finished" from="Viewport 1/Note Track thingy thing/Note Track Anim" to="Viewport 1/Note Track thingy thing" method="_on_Note_Track_Anim_animation_finished"]
[connection signal="timeout" from="Viewport 1/note dupe timer" to="." method="_on_note_dupe_timer_timeout"]
[connection signal="timeout" from="Viewport 1/note rota te timer" to="Viewport 1/Note Track thingy thing" method="_on_note_rota_te_timer_timeout"]
[connection signal="timeout" from="neeeto timer" to="." method="_on_neeeto_timer_timeout"]
